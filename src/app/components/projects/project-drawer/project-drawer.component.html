@if (project()) {
  <!-- Overlay (solo desktop) -->
  <div
    class="hidden md:block fixed inset-0 bg-black/60 backdrop-blur-sm z-40 transition-opacity duration-300"
    (click)="close.emit()"
  ></div>

  <!-- Drawer -->
  <aside
    class="fixed inset-0 md:inset-auto md:top-0 md:right-0 md:h-full md:w-full md:max-w-md bg-black border-l border-white/10 z-50 flex flex-col overflow-y-auto animate-slide-in"
  >
    <!-- Close -->
    <button
      class="self-end m-4 text-sm text-white/60 hover:text-yellow-300 transition-colors flex items-center gap-1"
      (click)="close.emit()"
    >
      Close <span class="text-base">✕</span>
    </button>

    <!-- Immagine -->
    <div
      class="w-full h-56 bg-white/5 flex items-center justify-center shrink-0 relative"
    >
      @if (project()?.urlPreview) {
        <img
          [src]="project()?.urlPreview"
          [alt]="project()?.nome"
          class="w-full h-full object-cover"
          (error)="img.style.display = 'none'"
          #img
        />
      }
      <span class="text-white/20 text-sm">No preview</span>
    </div>

    <!-- Contenuto -->
    <div class="flex flex-col gap-6 p-6 flex-1">
      <div class="flex flex-col gap-2">
        <span
          class="text-xs font-semibold uppercase tracking-widest text-yellow-300"
        >
          {{ project()?.anno }}
        </span>
        <h2
          class="m-0 text-3xl font-bold text-white uppercase leading-tight [font-family:var(--font-family)]"
        >
          {{ project()?.nome }}
        </h2>
      </div>

      <p class="m-0 text-white/70 leading-relaxed text-sm">
        {{ project()?.descrizione }}
      </p>

      <div class="flex flex-col gap-2">
        <span class="text-xs uppercase tracking-widest text-white/40"
          >Tecnologia</span
        >
        <span
          class="inline-block self-start text-xs font-semibold px-3 py-1.5 rounded-full border border-yellow-300/40 text-yellow-300"
        >
          {{ project()?.tecnologia }}
        </span>
      </div>

      @if (project()?.urlPreview) {
        <a
          [href]="project()?.urlPreview"
          target="_blank"
          rel="noopener"
          class="mt-auto inline-flex items-center justify-center gap-2 px-4 py-2.5 rounded-lg border border-yellow-300 text-yellow-300 text-sm font-semibold hover:bg-yellow-300 hover:text-black transition-all duration-200"
        >
          Apri progetto ↗
        </a>
      }

      <!-- Pulsante chiudi mobile (in fondo) -->
      <button
        class="md:hidden mt-4 w-full py-3 rounded-lg border border-white/20 text-white/60 text-sm font-semibold hover:border-yellow-300 hover:text-yellow-300 transition-all"
        (click)="close.emit()"
      >
        Chiudi
      </button>
    </div>
  </aside>
}
